store: /var/vcap/data/grootfs/store/unprivileged
driver: <%= p('grootfs.driver') %>
btrfs_bin: /var/vcap/packages/btrfs-progs/bin/btrfs
drax_bin: /var/vcap/packages/grootfs/bin/drax
newuidmap_bin: /var/vcap/packages/idmapper/bin/newuidmap
newgidmap_bin: /var/vcap/packages/idmapper/bin/newgidmap
log_level: <%= p('grootfs.log_level') %>
<% if_p("grootfs.dropsonde_port") do |dropsonde_port| %>
metron_endpoint: 127.0.0.1:<%= dropsonde_port %>
<% end %>

create:
  <% if p("grootfs.graph_cleanup_threshold_in_mb") >= 0 %>
  with_clean: true
  <% else %>
  with_clean: false
  <% end %>
  insecure_registries: <%= p('grootfs.insecure_docker_registry_list') %>
  uid_mappings:
  - "0:4294967294:1"
  - "1:1:4294967293"
  gid_mappings:
  - "0:4294967294:1"
  - "1:1:4294967293"

clean:
  ignore_images: <%= p('grootfs.persistent_image_list') %>
  <% if p("grootfs.graph_cleanup_threshold_in_mb") >= 0 %>
  threshold_bytes: <%= p("grootfs.graph_cleanup_threshold_in_mb") * 1048576 %>
  <% end %>
